$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834821
src/com/levelonelabs/aim/AIMClient.java 562 570
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
                if (currentlist.length() > 1800) {
                    try {
                        frameSend(currentlist + "}\0");
                        currentlist = "toc2_new_buddies {g:" + group + "\n";
                    } catch (IOException e) {
                        e.printStackTrace();
                        logger.severe("ERROR adding buddies.");
                    }
                }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834829
src/com/levelonelabs/aim/AIMClient.java 877 883
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834824
src/com/levelonelabs/aim/AIMClient.java 573 580
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
            if (currentlist.length() > ("toc2_new_buddies {g:" + group + "\n").length()) {
                try {
                    frameSend(currentlist + "}\0");
                } catch (IOException e) {
                    e.printStackTrace();
                    logger.severe("ERROR adding buddies.");
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834826
src/com/levelonelabs/aim/AIMClient.java 843 849
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834823
src/com/levelonelabs/aim/AIMClient.java 318 324
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
            if (!this.online) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            } else {

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834822
src/com/levelonelabs/aim/AIMClient.java 499 508
src/com/levelonelabs/aim/AIMClient.java 891 897
----------------------------------------
        } else {
            // for some reason we are sending a message to an offline buddy
            // this will generate a status request for them (this message will
            // be lost, but if they are online, we should get an update)
            try {
                frameSend("toc_get_status " + imNormalize(buddy.getName()) + "\0");
            } catch (IOException e) {
                logger.severe("Error sending status request for offline buddy: " + e.getMessage());
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834834
src/com/levelonelabs/aim/AIMClient.java 863 869
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834835
src/com/levelonelabs/aim/AIMClient.java 890 898
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
    private void generateDisconnected() {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834831
src/com/levelonelabs/aim/AIMClient.java 843 849
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834836
src/com/levelonelabs/aim/AIMClient.java 876 884
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
    private void generateConnected() {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834833
src/com/levelonelabs/aim/AIMClient.java 842 850
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
        } else {
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834832
src/com/levelonelabs/aim/AIMClient.java 861 870
src/com/levelonelabs/aim/AIMClient.java 908 916
----------------------------------------
    private void generateWarning(String from, int amount) {
        AIMBuddy aimbud = getBuddy(from);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834845
src/com/levelonelabs/aim/AIMClient.java 318 324
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
            if (!this.online) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            } else {

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834838
src/com/levelonelabs/aim/AIMClient.java 669 677
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
                if (currentlist.length() > 1800) {
                    try {
                        frameSend(currentlist + " " + group + "\0");
                        currentlist = "toc2_remove_buddy";
                    } catch (IOException e) {
                        e.printStackTrace();
                        logger.severe("ERROR removing buddies.");
                    }
                }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834843
src/com/levelonelabs/aim/AIMClient.java 877 883
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834837
src/com/levelonelabs/aim/AIMClient.java 562 570
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
                if (currentlist.length() > 1800) {
                    try {
                        frameSend(currentlist + "}\0");
                        currentlist = "toc2_new_buddies {g:" + group + "\n";
                    } catch (IOException e) {
                        e.printStackTrace();
                        logger.severe("ERROR adding buddies.");
                    }
                }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834842
src/com/levelonelabs/aim/AIMClient.java 863 869
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834847
src/com/levelonelabs/aim/AIMClient.java 680 687
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
            if (currentlist.length() > "toc2_remove_buddy".length()) {
                try {
                    frameSend(currentlist + " " + group + "\0");
                } catch (IOException e) {
                    e.printStackTrace();
                    logger.severe("ERROR adding buddies.");
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834840
src/com/levelonelabs/aim/AIMClient.java 843 849
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834846
src/com/levelonelabs/aim/AIMClient.java 573 580
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
            if (currentlist.length() > ("toc2_new_buddies {g:" + group + "\n").length()) {
                try {
                    frameSend(currentlist + "}\0");
                } catch (IOException e) {
                    e.printStackTrace();
                    logger.severe("ERROR adding buddies.");
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834841
src/com/levelonelabs/aim/AIMClient.java 891 897
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834839
src/com/levelonelabs/aim/AIMClient.java 842 850
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
        } else {
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834844
src/com/levelonelabs/aim/AIMClient.java 499 508
src/com/levelonelabs/aim/AIMClient.java 909 915
----------------------------------------
        } else {
            // for some reason we are sending a message to an offline buddy
            // this will generate a status request for them (this message will
            // be lost, but if they are online, we should get an update)
            try {
                frameSend("toc_get_status " + imNormalize(buddy.getName()) + "\0");
            } catch (IOException e) {
                logger.severe("Error sending status request for offline buddy: " + e.getMessage());
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834848
src/com/levelonelabs/aim/AIMClient.java 861 870
src/com/levelonelabs/aim/AIMClient.java 933 942
----------------------------------------
    private void generateWarning(String from, int amount) {
        AIMBuddy aimbud = getBuddy(from);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834850
src/com/levelonelabs/aim/AIMClient.java 908 916
src/com/levelonelabs/aim/AIMClient.java 933 942
----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834851
src/com/levelonelabs/aim/AIMClient.java 890 898
src/com/levelonelabs/aim/AIMClient.java 933 942
----------------------------------------
    private void generateDisconnected() {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834849
src/com/levelonelabs/aim/AIMClient.java 842 850
src/com/levelonelabs/aim/AIMClient.java 933 942
----------------------------------------
        } else {
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834852
src/com/levelonelabs/aim/AIMClient.java 876 884
src/com/levelonelabs/aim/AIMClient.java 933 942
----------------------------------------
    private void generateConnected() {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834858
src/com/levelonelabs/aim/AIMClient.java 908 916
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834853
src/com/levelonelabs/aim/AIMClient.java 562 570
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
                if (currentlist.length() > 1800) {
                    try {
                        frameSend(currentlist + "}\0");
                        currentlist = "toc2_new_buddies {g:" + group + "\n";
                    } catch (IOException e) {
                        e.printStackTrace();
                        logger.severe("ERROR adding buddies.");
                    }
                }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834859
src/com/levelonelabs/aim/AIMClient.java 891 897
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleDisconnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834862
src/com/levelonelabs/aim/AIMClient.java 499 508
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        } else {
            // for some reason we are sending a message to an offline buddy
            // this will generate a status request for them (this message will
            // be lost, but if they are online, we should get an update)
            try {
                frameSend("toc_get_status " + imNormalize(buddy.getName()) + "\0");
            } catch (IOException e) {
                logger.severe("Error sending status request for offline buddy: " + e.getMessage());
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834857
src/com/levelonelabs/aim/AIMClient.java 843 849
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834856
src/com/levelonelabs/aim/AIMClient.java 842 850
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        } else {
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834861
src/com/levelonelabs/aim/AIMClient.java 877 883
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834864
src/com/levelonelabs/aim/AIMClient.java 573 580
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
            if (currentlist.length() > ("toc2_new_buddies {g:" + group + "\n").length()) {
                try {
                    frameSend(currentlist + "}\0");
                } catch (IOException e) {
                    e.printStackTrace();
                    logger.severe("ERROR adding buddies.");
                }
            }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834855
src/com/levelonelabs/aim/AIMClient.java 669 677
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
                if (currentlist.length() > 1800) {
                    try {
                        frameSend(currentlist + " " + group + "\0");
                        currentlist = "toc2_remove_buddy";
                    } catch (IOException e) {
                        e.printStackTrace();
                        logger.severe("ERROR removing buddies.");
                    }
                }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834860
src/com/levelonelabs/aim/AIMClient.java 863 869
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834865
src/com/levelonelabs/aim/AIMClient.java 680 687
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
            if (currentlist.length() > "toc2_remove_buddy".length()) {
                try {
                    frameSend(currentlist + " " + group + "\0");
                } catch (IOException e) {
                    e.printStackTrace();
                    logger.severe("ERROR adding buddies.");
                }
            }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834854
src/com/levelonelabs/aim/AIMClient.java 909 915
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834863
src/com/levelonelabs/aim/AIMClient.java 318 324
src/com/levelonelabs/aim/AIMClient.java 935 941
----------------------------------------
            if (!this.online) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            } else {

----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834867
src/com/levelonelabs/aim/AIMClient.java 933 942
src/com/levelonelabs/aim/AIMClient.java 953 969
----------------------------------------
        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
    private void generateBuddySignOff(String buddy, String message) {
        AIMBuddy aimbud = getBuddy(buddy);
        if (aimbud == null) {
            logger.severe("ERROR:  NOTIFICATION ABOUT NON BUDDY(" + buddy + ")");
            return;
        }

        // logger.fine("XML = \n" + aimbud.toXML());
        aimbud.setOnline(false);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834866
src/com/levelonelabs/aim/AIMClient.java 861 870
src/com/levelonelabs/aim/AIMClient.java 953 969
----------------------------------------
    private void generateWarning(String from, int amount) {
        AIMBuddy aimbud = getBuddy(from);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleWarning(aimbud, amount);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
    private void generateBuddySignOff(String buddy, String message) {
        AIMBuddy aimbud = getBuddy(buddy);
        if (aimbud == null) {
            logger.severe("ERROR:  NOTIFICATION ABOUT NON BUDDY(" + buddy + ")");
            return;
        }

        // logger.fine("XML = \n" + aimbud.toXML());
        aimbud.setOnline(false);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834868
src/com/levelonelabs/aimbot/AIMBot.java 334 342
src/com/levelonelabs/aim/AIMClient.java 830 837
----------------------------------------
		if (this.enforceUser && !buddy.hasRole(ROLE_USER)) {
			//if we are enforcing the user list and the buddy isnt a user,
			// ignore the request and send the non-user response
			logger.info("Ignoring request:" + request + " from buddy that isn't a user, sending non user response.");
			if (this.nonUserResponse != null && !this.nonUserResponse.trim().equals("")) {
				aim.sendMessage(buddy, this.nonUserResponse);
			}
			return;
		}

----------------------------------------
            } else {
                logger.info("MESSAGE FROM A NON BUDDY(" + from + ")");
                // only send a response if a non-empty one is configured
                if ((nonUserResponse != null) && !nonUserResponse.equals("")) {
                    sendMesg(from, nonUserResponse);
                }
                return;
            }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834878
src/com/levelonelabs/aim/AIMClient.java 953 969
src/com/levelonelabs/aim/AIMClient.java 926 943
----------------------------------------
    private void generateBuddySignOff(String buddy, String message) {
        AIMBuddy aimbud = getBuddy(buddy);
        if (aimbud == null) {
            logger.severe("ERROR:  NOTIFICATION ABOUT NON BUDDY(" + buddy + ")");
            return;
        }

        // logger.fine("XML = \n" + aimbud.toXML());
        aimbud.setOnline(false);
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
    private void generateBuddySignOn(String buddy, String message) {
        AIMBuddy aimbud = getBuddy(buddy);
        if (aimbud == null) {
            logger.severe("ERROR:  NOTIFICATION ABOUT NON BUDDY(" + buddy + ")");
            return;
        }

        if (!aimbud.isOnline()) {
            aimbud.setOnline(true);
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleBuddySignOn(aimbud, message);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834883
src/com/levelonelabs/aim/AIMClient.java 843 849
src/com/levelonelabs/aim/AIMClient.java 962 968
----------------------------------------
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834882
src/com/levelonelabs/aim/AIMClient.java 842 850
src/com/levelonelabs/aim/AIMClient.java 962 968
----------------------------------------
        } else {
            for (int i = 0; i < aimListeners.size(); i++) {
                try {
                    ((AIMListener) aimListeners.get(i)).handleMessage(aimbud, request);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834887
src/com/levelonelabs/aim/AIMClient.java 877 883
src/com/levelonelabs/aim/AIMClient.java 962 968
----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleConnected();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834950
src/com/levelonelabs/aim/AIMClient.java 318 324
src/com/levelonelabs/aim/AIMClient.java 962 968
----------------------------------------
            if (!this.online) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            } else {

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
97
22834884
src/com/levelonelabs/aim/AIMClient.java 908 916
src/com/levelonelabs/aim/AIMClient.java 962 968
----------------------------------------
    private void generateError(String error, String message) {
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleError(error, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

----------------------------------------
        for (int i = 0; i < aimListeners.size(); i++) {
            try {
                ((AIMListener) aimListeners.get(i)).handleBuddySignOff(aimbud, message);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

----------------------------------------
